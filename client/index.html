<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Repubikla</title>
        <link rel="icon" href="resources/img/logo_clean.png">

        <meta property="og:url" content="http://repubikla.org" />
        <meta property="og:title" content="Repubikla" />
        <meta property="og:description" content="Plataforma de mapeo alimentada por ciudadanos que con una estrategia de crowdsourcing busca generar y centralizar datos sobre la movilidad no motorizada en las ciudades. Surge de la comunidad OpenStreetMap México con el objetivo de complementar información oficial y ofrecer un diagnóstico sobre el volumen y la diversidad de los desplazamientos ciclistas, la intermodalidad, la movilidad en grupo, la infraestructura, la siniestralidad y la inseguridad en el espacio público. Así los tomadores de decisión y la sociedad civil quedan dotados de una herramienta de diagnóstico para impulsar y diseñar mejores condiciones para una movilidad sustentable y segura." />

        <!-- Bootstrap -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <!-- Bootstrap-datarangepicker -->
        <link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
        <!-- Bootstrap-social -->
        <link rel="stylesheet" href="resources/plugins/bootstrap.social/bootstrap-social.css" />
        <!-- Bootstrap-slider -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.2.0/css/bootstrap-slider.min.css" />
        <!-- Bootstrap-select -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.min.css">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
        <!-- Leaflet-PruneCluster -->
        <link rel="stylesheet" href="resources/plugins/leaflet.PruneCluster/LeafletStyleSheet.css">
        <!-- Leaflet-EasyButton -->
        <link rel="stylesheet" href="resources/plugins/leaflet.EasyButton/easyButton.css">
        <!-- Leaflet-GeoSearch -->
        <link rel="stylesheet" href="resources/plugins/leaflet.GeoSearch/css/l.geosearch.css">
        <!-- Leaflet-Draw-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.10/leaflet.draw.css" />
        <!-- Leaflet-Locate control-->
        <link rel="stylesheet" href="resources/plugins/leaflet-locatecontrol/L.Control.Locate.min.css" />
        <!-- Leaflet-sidebar-->
        <link rel="stylesheet" href="resources/plugins/leaflet.sidebar/L.Control.Sidebar.css" />

        <link rel="stylesheet" href="resources/css/app.css" />

        <script>
            window.twttr = (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0],
                    t = window.twttr || {};

                if (d.getElementById(id)) return t;

                js = d.createElement(s);
                js.id = id;
                js.src = "https://platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);

                t._e = [];
                t.ready = function(f) {
                    t._e.push(f);
                };

                return t;
            }(document, "script", "twitter-wjs"));
        </script>

        <script>
            (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v2.7";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>
    </head>

    <body>
        <!-- Navigation bar -->
        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand">
                        <img alt="Brand" src="resources/img/logo_clean.png" width="40">
                    </a>
                </div>


                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                    <ul class="nav navbar-nav">
                        <!-- About us -->
                        <li><button type="button" class="btn btn-link navbar-btn" onClick="showSidebar('about')">Acerca del proyecto</button></li>
                        <li><button type="button" class="btn btn-link navbar-btn" onClick="showSidebar('filters')">Filtrar datos</button></li>
                        <li><button type="button" class="btn btn-link navbar-btn" onClick="showSidebar('indicators')">Indicadores</button></li>
                        <li><button type="button" class="btn btn-link navbar-btn" onClick="showSidebar('downloads')">Descargar datos</button></li>

                        <li><a href="https://repubikla.carto.com/maps" target="_blank">Mapas temáticos</a></li>
                    </ul>

                    <!-- Right -->
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="https://github.com/leodc/repubikla" target="_blank"><i class="fa fa-github" aria-hidden="true"></i>&nbsp;Nuestro github</a>
                        </li>
                    </ul>

                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>


        <!-- Content -->
        <div class="container" id="mapContainer">
            <div id="map"></div>
        </div>



        <!-- Modals -->

        <!-- Point -->
        <div id="pointDataDialog" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">

                    <!-- Header -->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Cuéntanos acerca del punto que deseas agregar</h4>
                    </div>

                    <!-- Body -->
                    <div class="modal-body">
                        <div class="content">
                            <div class="row">


                                <form id="formPointData">
                                    <div class="col-sm-6 right-separator">
                                        <div class="form-group-sm">
                                            <label for="newPointMotivo">¿Qué indica este punto?</label>
                                            <select id="newPointMotivo" class="form-control">
                                                <option value='Cruce peligroso'>Cruce peligroso</option>
                                                <option value='Diseño urbano peligroso'>Diseño urbano peligroso</option>
                                                <option value='Condiciones peligrosas'>Condiciones peligrosas</option>
                                                <option value='Bicicleta blanca'>Bicicleta blanca</option>
                                                <optgroup label="Suceso">
                                                    <option value='Asalto'>Asalto</option>
                                                    <option value='Incidente vial'>Incidente vial</option>
                                                    <option value='Robo de bicicleta en estacionamiento'>Robo de bicicleta en estacionamiento</option>
                                                    <option value='Robo de bicicleta estacionada en la calle'>Robo de bicicleta estacionada en la calle</option>
                                                </optgroup>
                                                <optgroup label="Invasión de ciclovía o carril confinado por:">
                                                    <option value='Vehículos estacionados en carril confinado'>Vehículos estacionados</option>
                                                    <option value='Vehículos en movimiento en carril confinado'>Vehículos en movimiento</option>
                                                    <option value='Comercio en carril confinado'>Comercio</option>
                                                    <option value='Otro'>Otro</option>
                                                </optgroup>
                                                <optgroup label="Bikefriendly">
                                                    <option value='Comercio/Servicio Bikefriendly'>Comercio/Servicio Bikefriendly</option>
                                                    <option value='Colectivo/Punto de encuentro'>Colectivo/Punto de encuentro</option>
                                                </optgroup>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="fecha">Fecha</label>
                                            <!--<input type="text" name="fecha" id="fecha" class="form-control"/>-->
                                            <div id="fecha" class="pull-left input-sm col-sm-6" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">
                                                <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                                <span id="newPointDate"></span> <b class="caret"></b>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="newPointComment">Comentario</label>
                                            <textarea id='newPointComment' class='form-control' rows='4' placeholder='Indica información puntual para caracterizar con mayor profundidad el elemento'></textarea>
                                        </div>
                                    </div>
                                    <div class="col-sm-6" style="border-left:1px solid black;">
                                        <h4>Información personalizada</h4>
                                        <p>Agrega tantos pares como necesites, si no ocupas alguno solo déjalo vacío.</p>
                                        <table class="table table-striped table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Categoría</th>
                                                    <th>Valor</th>
                                                </tr>
                                            </thead>
                                            <tbody id="pointCustomInfo">
                                                <tr>
                                                    <td>
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <input class="form-control input-sm newPointValue" type="text" data-rule-minlength="3" data-rule-maxlength="25" data-msg-minlength="Muy corto" data-msg-maxlength="Muy largo" data-rule-idName="true" >
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <input class='form-control input-sm newPointValue' type='text'>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <button class="btn btn-default pull-right btn-sm addCustomRow" target="pointCustomInfo"  additional-class="newPointValue">Añadir categoría</button>
                                    </div>
                                </form>


                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="submitPointData">Siguiente</button>
                        <button type="button" class="btn btn-default" data-on-confirm="window.endDraw" data-toggle="confirmation" data-title="¿Estas seguro que deseas eliminar el dibujo?" data-popout="true" data-btn-ok-label="Si" data-btn-cancel-label="No">Cancelar dibujo</button>
                    </div>
                </div>

            </div>
        </div>


        <!-- Legend -->
        <div class="modal fade" tabindex="-1" role="dialog" id="legendDialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">

                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Acerca del mapa</h4>
                    </div>

                    <div class="modal-body" id="legendContent">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /. Legend modal -->


        <!-- Loading -->
        <div class="modal fade" tabindex="-1" role="dialog"  id="chargingDialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <h4>Cargando...</h4>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                <span class="sr-only">Cargando...</span>
                            </div>
                        </div>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->


        <!-- Route -->
        <div id="routeDataDialog" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">

                    <!-- Header -->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Cuéntanos acerca de la ruta que deseas agregar</h4>
                    </div>

                    <!-- Body -->
                    <div class="modal-body">
                        <div class="content">
                            <div class="row">


                                <form id="formRouteData">
                                    <div class="col-sm-6 right-separator">

                                        <!-- motivo -->
                                        <div class="form-group-sm">
                                            <label for="newRouteMotivo">¿Cúal fue el motivo principal del recorrido?</label>
                                            <select id="newRouteMotivo" class="form-control">
                                                <option value='Ir al trabajo'>Ir al trabajo</option>
                                                <option value='Regreso a casa'>Regreso a casa</option>
                                                <option value='Desplazamientos de trabajo'>Desplazamientos de trabajo</option>
                                                <option value='Estudios'>Estudios</option>
                                                <option value='Visitas'>Visitas</option>
                                                <option value='Compras'>Compras</option>
                                                <option value='Paseo, turismo'>Paseo, turismo</option>
                                                <option value='Deporte'>Deporte</option>
                                                <option value='Comida'>Comida</option>
                                                <option value='Otra actividad'>Otra actividad</option>
                                            </select>
                                        </div>

                                        <!-- tiempo -->
                                        <div class="form-group">
                                            <label for="timeNewRoute">Tiempo del recorrido (minutos)</label>
                                            <input type="number" id="timeNewRoute" class="form-control input-sm" min="1" value="30" data-msg-required="Campo necesario" data-msg-number="Número invalido" required/>
                                        </div>

                                        <!-- frecuencia -->
                                        <div class="form-group">
                                            <label for="frequencyNewRoute">Frecuencia del recorrido: </label>
                                            <span id="frequencyNewRouteSliderLabel">Una vez por semana</span>
                                            <input id="frequencyNewRoute" data-slider-id='frequencyNewRouteSlider' type="text" data-slider-min="1" data-slider-max="13" data-slider-step="1" data-slider-value="4"/>
                                        </div>


                                        <!-- checkbox -->
                                        <div class="form-group">
                                            <label>Califica esta ruta, en su mayoría es:</label>
                                            <div class="checkbox">
                                                <label for='calificacion_1'><input type='checkbox' id='calificacion_1' class="routeCheckData">Rápida y conectada</label>
                                            </div>
                                            <div class="checkbox">
                                                <label for='calificacion_2'><input type='checkbox' id='calificacion_2' class="routeCheckData">Segura</label>
                                            </div>
                                            <div class="checkbox">
                                                <label for='calificacion_3'><input type='checkbox' id='calificacion_3' class="routeCheckData">Agradable y cómoda</label>
                                            </div>
                                            <div class="checkbox">
                                                <label for='calificacion_4'><input type='checkbox' id='calificacion_4' class="routeCheckData">La única que puedo tomar</label>
                                            </div>
                                        </div>

                                        <!-- acompañantes -->
                                        <div class="form-group">
                                            <label for="newRouteCompanions">Número de personas con las que haces este recorrido</label>
                                            <input type="number" id="newRouteCompanions" data-msg-number="Número invalido" class="form-control input-sm" min="0" value="0"/>
                                        </div>

                                        <div class="form-group">
                                            <div class="checkbox">
                                                <label for='transporte'><input type='checkbox' id='transporte'  class="routeCheckData">Usé transporte público antes o después de la ruta.</label>
                                            </div>
                                            <div class="checkbox">
                                                <label for='publica'><input type='checkbox' id='publica'  class="routeCheckData">Hice la ruta en bicicleta pública.</label>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label for="newRouteComment">Comentario</label>
                                            <textarea id='newRouteComment' class='form-control' rows='4' placeholder='Indica información puntual para caracterizar con mayor profundidad el elemento'></textarea>
                                        </div>

                                    </div>
                                    <div class="col-sm-6" style="border-left:1px solid black;">
                                        <h4>Información personalizada</h4>
                                        <p>Agrega tantos pares como necesites, si no ocupas alguno solo déjalo vacío.</p>
                                        <table class="table table-striped table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Categoría</th>
                                                    <th>Valor</th>
                                                </tr>
                                            </thead>
                                            <tbody id="routeCustomInfo">
                                                <tr>
                                                    <td>
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <input class="form-control input-sm newRouteValue" type="text" data-rule-minlength="3" data-rule-maxlength="25" data-msg-minlength="Muy corto" data-msg-maxlength="Muy largo" data-rule-idName="true" >
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <input class='form-control input-sm newRouteValue' type='text'>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <button class="btn btn-default pull-right btn-sm addCustomRow" target="routeCustomInfo" additional-class="newRouteValue" >Añadir categoría</button>
                                    </div>
                                </form>


                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="submitRouteData">Siguiente</button>
                        <button type="button" class="btn btn-default" data-on-confirm="window.endDraw" data-toggle="confirmation" data-title="¿Estas seguro que deseas eliminar el dibujo?" data-popout="true" data-btn-ok-label="Si" data-btn-cancel-label="No">Cancelar dibujo</button>
                    </div>
                </div>

            </div>
        </div>


        <!-- Zones -->
        <div id="zonesDataDialog" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">

                <!-- Modal content-->
                <div class="modal-content">

                    <!-- Header -->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Cuéntanos acerca de la zona que deseas agregar</h4>
                    </div>

                    <!-- Body -->
                    <div class="modal-body">
                        <div class="content">
                            <div class="row">

                                <form id="formZoneData">
                                    <div class="col-sm-6 right-separator">
                                        <label>¿Qué características quieres señalar de esta área?</label>
                                        <!-- checkbox -->
                                        <div class="form-group">
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='agradable' id='newZoneagradable' class="zoneCheckData">Agradable (paisaje urbano, ambiente, vegetación)</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='desagradable' id='newZonedesagradable' class="zoneCheckData">Desagradable, hostil</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='comoda' id='newZonecomoda' class="zoneCheckData">Cómoda, con buen diseño de calles y mobiliario</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='incomoda' id='newZoneincomoda' class="zoneCheckData">Incomoda, con mal diseño de calles y mobiliario</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='comercios' id='newZonecomercios' class="zoneCheckData">Con concentración de comercios y servicios útiles</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='conectada' id='newZoneconectada' class="zoneCheckData">Bien conectada (diseño de cruces, fases semafóricas)</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='no_conectada' id='newZoneno_conectada' class="zoneCheckData">Mal conectada</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='insegura' id='newZoneinsegura' class="zoneCheckData">Insegura (a nivel personal)</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='no_iluminada' id='newZoneno_iluminada' class="zoneCheckData">Mal iluminada</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='transito' id='newZonetransito' class="zoneCheckData">Tránsito confuso y peligroso</label><br>
                                            </div>
                                            <div class="checkbox">
                                                <label><input type='checkbox' value='no_mantenimiento' id='newZoneno_mantenimiento' class="zoneCheckData">Mal mantenimiento (pavimento, instalaciones)</label><br><br>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="newZoneComment">Comentario</label>
                                            <textarea id='newZoneComment' class='form-control' rows='4' placeholder='Indica información puntual para caracterizar con mayor profundidad el elemento'></textarea>
                                        </div>

                                    </div>
                                    <div class="col-sm-6" style="border-left:1px solid black;">
                                        <h4>Información personalizada</h4>
                                        <p>Agrega tantos pares como necesites, si no ocupas alguno solo déjalo vacío.</p>
                                        <table class="table table-striped table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Categoría</th>
                                                    <th>Valor</th>
                                                </tr>
                                            </thead>
                                            <tbody id="zoneCustomInfo">
                                                <tr>
                                                    <td>
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <input class="form-control input-sm newZoneValue" type="text" data-rule-minlength="3" data-rule-maxlength="25" data-msg-minlength="Muy corto" data-msg-maxlength="Muy largo" data-rule-idName="true" >
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <input class='form-control input-sm newZoneValue' type='text'>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <button class="btn btn-default pull-right btn-sm addCustomRow" target="zoneCustomInfo" additional-class="newZoneValue" >Añadir categoría</button>
                                    </div>
                                </form>


                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="submitZoneData">Siguiente</button>
                        <button type="button" class="btn btn-default" data-on-confirm="window.endDraw" data-toggle="confirmation" data-title="¿Estas seguro que deseas eliminar el dibujo?" data-popout="true" data-btn-ok-label="Si" data-btn-cancel-label="No">Cancelar dibujo</button>
                        <!--
                        <button type="button" class="btn btn-default" data-on-confirm="window.endDraw" data-toggle="confirmation" data-title="¿Estas seguro que deseas eliminar el dibujo?" data-popout="true" data-btn-ok-label="Si" data-btn-cancel-label="No">Cancelar dibujo</button>
                        -->
                    </div>
                </div>

            </div>
        </div>

        <!-- sidebar-filters -->
        <div id="sidebarFilter">
            <h3>Filtrar datos</h3>

            <label for="pointTypeFilter">Mostrar puntos de tipo: </label>
            <select class="selectpicker" id="pointTypeFilter"  multiple data-selected-text-format="count > 3" data-width="100%" data-actions-box="true" data-count-selected-text="{0} items seleccionados" data-deselect-all-text='Desmarcar todos' data-select-all-text="Marcar todos" data-none-selected-text="No mostrar puntos">
                <option value="Incidente vial">Incidente vial</option>
                <option value="Asalto">Asalto</option>
                <option value="Robo de bicicleta en estacionamiento">Robo de bicicleta en estacionamiento</option>
                <option value="Robo de bicicleta estacionada en la calle">Robo de bicicleta estacionada en la calle</option>
                <option value="Bicicleta blanca">Bicicleta blanca</option>
                <option value="Cruce peligroso">Cruce peligroso</option>
                <option value="Diseño urbano peligroso">Diseño urbano peligroso</option>
                <option value="Condiciones peligrosas">Condiciones peligrosas</option>
                <option value="Comercio/Servicio Bikefriendly">Comercio/Servicio Bikefriendly</option>
                <option value="Colectivo/Punto de encuentro">Colectivo/Punto de encuentro</option>
                <option value="Vehículos estacionados en carril confinado">Vehículos estacionados en carril confinado</option>
                <option value="Vehículos en movimiento en carril confinado">Vehículos en movimiento en carril confinado</option>
                <option value="Comercio en carril confinado">Comercio en carril confinado</option>
                <option value="Invasión recurrente de banqueta">Invasión recurrente de banqueta</option>
            </select>

            <label for="routeTypeFilter">Mostrar rutas con motivo: </label>
            <select class="selectpicker" id="routeTypeFilter"  multiple data-selected-text-format="count > 3" data-width="100%" data-actions-box="true" data-count-selected-text="{0} items seleccionados" data-deselect-all-text='Desmarcar todos' data-select-all-text="Marcar todos" data-none-selected-text="No mostrar rutas">
                <option value="Ir al trabajo">Ir al trabajo</option>
                <option value="Regreso a casa">Regreso a casa</option>
                <option value="Desplazamientos de trabajo">Desplazamientos de trabajo</option>
                <option value="Estudios">Estudios</option>
                <option value="Visitas">Visitas</option>
                <option value="Compras">Compras</option>
                <option value="Paseo, turismo">Paseo, turismo</option>
                <option value="Deporte">Deporte</option>
                <option value="Comida">Comida</option>
                <option value="Otra actividad">Otra actividad</option>
            </select>

            <label for="zoneTypeFilter">Mostrar zonas de características: </label>
            <select class="selectpicker" id="zoneTypeFilter"  multiple data-selected-text-format="count > 3" data-width="100%" data-actions-box="true" data-count-selected-text="{0} items seleccionados" data-deselect-all-text='Desmarcar todos' data-select-all-text="Marcar todos" data-none-selected-text="No mostrar zonas">
                <option value="zona_agradable">Agradable</option>
                <option value="zona_desagradable">Desagradable, hostil</option>
                <option value="zona_comoda">Cómoda, con buen diseño de calles y mobiliario</option>
                <option value="zona_incomoda">Incomoda, con mal diseño de calles y mobiliario</option>
                <option value="zona_comercio">Con concentración de comercios y servicios útiles</option>
                <option value="zona_conectada">Bien conectada</option>
                <option value="zona_no_conectada">Mal conectada</option>
                <option value="zona_insegura">Insegura (a nivel personal)</option>
                <option value="zona_no_iluminada">Mal iluminada</option>
                <option value="zona_transito">Tránsito confuso y peligroso</option>
                <option value="zona_no_mantenimiento">Mal mantenimiento (pavimento, instalaciones)</option>
            </select>

            <div class="pull-right" style="margin-top:5px;">
                <button id="applyFilters" class="btn btn-primary">Aplicar filtros</button>
                <button id="cleanFilters" class="btn btn-default">Limpiar filtros</button>
            </div>
        </div>


        <!-- sidebar-download -->
        <div id="sidebarDownload">
            <h3>Descargar datos</h3>

            <!-- <div class="checkbox">
                <label><input type="checkbox" value="">Descargar solo información visible en el mapa.</label>
            </div> -->

            <div class="text-center">
                <div class="row">
                    <button id="downloadPoints" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i>" class="btn btn-primary" onclick="window.downloadData(this.id,'puntos');" style="width:180px;margin-top:3px;"><img src="resources/img/icons/point.png" width="20" class="img-responsive" style='display:inline-block;'><span style='display:inline-block;'>&nbsp;Descargar puntos</span></button>
                </div>

                <div class="row">
                    <button id="downloadRoutes" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i>" class="btn btn-primary" onclick="window.downloadData(this.id,'rutas');" style="width:180px;margin-top:3px;"><img src="resources/img/icons/route.png" width="20" class="img-responsive" style='display:inline-block;'><span style='display:inline-block;'>&nbsp;Descargar rutas</span></button>
                </div>

                <div class="row">
                    <button id="downloadZones" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i>" class="btn btn-primary" onclick="window.downloadData(this.id,'zonas');" style="width:180px;margin-top:3px;"><img src="resources/img/icons/zone.png"  width="20" class="img-responsive" style='display:inline-block;'><span style='display:inline-block;'>&nbsp;Descargar zonas</span></button>
                </div>
            </div>
        </div>

        <!-- sidebar-about -->
        <div id="sidebarAbout">
            <div>
                <!-- modal tabs -->
                <ul class="nav nav-tabs nav-justified" id="aboutTabs">
                    <!-- about tab -->
                    <li class="active"><a href="#about" data-toggle="tab">Acerca del proyecto</a></li>
                    <!-- us tab -->
                    <li><a href="#us" data-toggle="tab"><i class="fa fa-users"></i></a></li>
                    <!-- how tab -->
                    <li><a href="#disclaimer" data-toggle="tab"><i class="fa fa-question-circle"></i></a></li>
                </ul>

                <!-- modal tabs content -->
                <div class="tab-content" id="aboutTabsContent">

                    <!-- about tab -->
                    <div class="tab-pane fade active in text-justify" id="about" >
                        <img src="resources/img/logo_clean.png" alt="Repubikla" class="img-responsive" style="padding:20px;padding-top:5px;"></img>

                        <div id="fb-root"></div>
                        <div class="fb-like" data-href="https://www.facebook.com/repubikla" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="true" style="margin-bottom:3px;"></div>
                        <a class="twitter-follow-button" href="https://twitter.com/repubikla">Follow @Repubikla</a>

                        <div class="clearfix"></div>

                        <p>Repubikla es una plataforma de mapeo alimentada por ciudadanos que con una estrategia de crowdsourcing busca generar y centralizar datos sobre la movilidad no motorizada en las ciudades.</p>
                        <p>Surge de la comunidad OpenStreetMap México con el objetivo de complementar información oficial y ofrecer un diagnóstico sobre el volumen y la diversidad de los desplazamientos ciclistas, la intermodalidad, la movilidad en grupo, la infraestructura, la siniestralidad y la inseguridad en el espacio público. Así los tomadores de decisión y la sociedad civil quedan dotados de una herramienta de diagnóstico para impulsar y diseñar mejores condiciones para una movilidad sustentable y segura.</p>
                        <p>Las noticias sobre el proyecto se publican <a href="http://www.openstreetmap.mx/repubikla/" target="_blank">aquí</a>.</p>
                    </div>

                    <!-- us tab -->
                    <div class="tab-pane fade text-justify" id="us">
                      <h3>Nosotros</h3>

                      <p>Somos una propuesta comunitaria para construir un sistema nervioso de movilidad en las ciudades. Somos un laboratorio y experimento ciudadano para generar soluciones voluntarias en el ámbito de la creación de datos públicos abiertos, que ayuden a mejorar las políticas públicas.</p>
                      <p>Actualmente impulsamos la participación, movilización y activación ciudadana, así como del sector público y privado; esto con la finalidad de crear un foro de reflexión metodológica que busque una permanente colaboración con la academia, dependencias de gobierno, instituciones de estadística, geografía, y la ciudadanía.</p>
                      <p>De esta forma y con una colaboración evolutiva y abierta, nos convertimos en sensores de movilidad activa por medio de la recolección y del análisis de datos, impulsando soluciones al rezago de datos públicos abiertos de calidad.</p>
                    </div>

                    <!-- how tab -->
                    <div class="tab-pane fade text-justify" id="disclaimer">
                      <h3>¿Cómo funciona?</h3>
                        <p>Sobre un mapa detallado de OpenStreetMap, los usuarios ingresan el dibujo de sus recorridos frecuentes, los puntos y las zonas donde señalan una información relevante respecto a su experiencia urbana. La información es ingresada mediante formularios sintéticos, con una parte predefinida y con la posibilidad de aportar campos personalizados. La información personalizada aparecerá automáticamente como columnas independientes al momento de descargar la base de datos.</p>
                        <p>Georeferenciada y acumulativa, la información permite en un instante generar mapas y descargar los datos.</p>
                        <p>La plataforma de mapeo es solo uno de los insumos de Repubikla. Se conectará también con aplicaciones existentes en el mercado, vinculando el conjunto a la misma base de datos dinámica y descargable.</p>

                        <img src="resources/img/diagrama sistema.png" alt="Repubikla" class="img-responsive"></img>
                    </div>
                </div>
            </div>
        </div>


        <!-- sidebar indicators -->
        <div id="sidebarIndicators">
          <h3>Indicadores</h3>
          <p>Estos indicadores se generan con la extensión de la vista actual del mapa.</p>

          <p class="lead" style="margin-bottom:0px;">Los 10 cruces con mayor número de incidentes viales.</p>
          <button type="button" class="btn btn-link btn-xs hidden" onclick="downloadTopDangerousResults()" id="downloadTopDangerous">Descargar resultados</button>
          <pre id="resultTopDangerous"></pre>
          <small class="text-muted">* Este proceso consume recursos de tu computadora.</small>

          <div class="pull-right">
            <button type="button" class="btn btn-primary" onclick="getTopDangerous()">Generar</button>
            <button type="button" class="btn btn-link" onclick="clearIndicators()">Limpiar</button>
          </div>
        </div>

        <script src="resources/js/utils.js"></script>

        <!--    Moment    -->
        <script src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>

        <!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

        <!-- shape -->
        <script src="https://unpkg.com/shp-write@latest/shpwrite.js"></script>

        <!-- FileSaver -->
        <script src="resources/plugins/fileSaver/FileSaver.min.js"></script>

        <!-- jQuery-validator -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.15.1/jquery.validate.js"></script>

        <!-- socket.io -->
        <script src="/socket.io/socket.io.js"></script>

        <!-- Bootstrap -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <!--Bootstrap-datarangepicker-->
        <script src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
        <!--Bootstrap-slider-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.2.0/bootstrap-slider.min.js"></script>
        <!--Bootstrap-confirmation-->
        <script src="resources/plugins/bootstrap.confirmation/bootstrap-confirmation.js"></script>
        <!-- Bootstrap-select -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.min.js"></script>

        <!-- Notify -->
        <script src="resources/plugins/notify/notify.min.js"></script>

        <!-- Leaflet -->
        <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
        <!-- MapQuest Tiles -->
        <script src="https://www.mapquestapi.com/sdk/leaflet/v2.2/mq-map.js?key=ZJanp0xBDpPMOLftzxBrG1tzmNtsjPWF"></script>
        <!-- Leaflet.PruneCluster -->
        <script src="resources/plugins/leaflet.PruneCluster/PruneCluster.js"></script>
        <!-- Leaflet-EasyButton -->
        <script src="resources/plugins/leaflet.EasyButton/easyButton.js"></script>
        <!--Draw-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.10/leaflet.draw.js"></script>
        <!--GeoSearch-->
        <script src="resources/plugins/leaflet.GeoSearch/js/l.control.geosearch.js"></script>
        <script src="resources/plugins/leaflet.GeoSearch/js/l.geosearch.provider.openstreetmap.js"></script>
        <!-- Locate control-->
        <script src="resources/plugins/leaflet-locatecontrol/L.Control.Locate.min.js" charset="utf-8"></script>
        <!-- sidebar-->
        <script src="resources/plugins/leaflet.sidebar/L.Control.Sidebar.js"></script>

        <!-- turf -->
        <script src="resources/plugins/turf.min.js"></script>

        <script src="resources/js/socket.js"></script>
        <script src="resources/js/indicators.js"></script>
        <script src="resources/js/app.js"></script>
        <script src="resources/js/point.js"></script>
        <script src="resources/js/route.js"></script>
        <script src="resources/js/zone.js"></script>
        <script src="resources/js/map.js"></script>
    </body>
</html>
