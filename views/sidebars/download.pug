#sidebarDownload
  h3 Descargar datos
  .text-center
    button#downloadPoints.btn.btn-success.bg-repu(onclick="window.downloadData(this.id,'puntos');" style='width:180px;margin-top:3px;')
      img.img-responsive(src='/img/icons/point.png' width='20' style='display:inline-block;')
      span(style='display:inline-block;') &nbsp;Descargar puntos
    
    br
    
    button#downloadRoutes.btn.btn-success.bg-repu(onclick="window.downloadData(this.id,'rutas');" style='width:180px;margin-top:3px;')
      img.img-responsive(src='/img/icons/route.png' width='20' style='display:inline-block;')
      span(style='display:inline-block;') &nbsp;Descargar rutas
    
    br
      
    button#downloadZones.btn.btn-success.bg-repu(onclick="window.downloadData(this.id,'zonas');" style='width:180px;margin-top:3px;')
      img.img-responsive(src='/img/icons/zone.png' width='20' style='display:inline-block;')
      span(style='display:inline-block;') &nbsp;Descargar zonas


script.
  function downloadCsv(filename, csvContent){
    var blob = new Blob([csvContent], {type: "text/plain;charset=utf-8"});
    saveAs(blob, filename + ".csv");
  }
  
  function sendGeojson(geojson, filename){
    var text = JSON.stringify(geojson);
    var file = new File([text], filename, { type: "application/json;charset=utf-8" });
    saveAs(file);
  }
  
  function downloadData(buttonID, dataType){
    $("#" + buttonID).prop("disabled", true);
  
    var filename = "repubikla-" + dataType + ".json";
    var eventName = buttonID;
    
    if(dataType == "puntos"){
      getPoints(function(data){
        sendGeojson(data, filename);
        
        $("#" + buttonID).prop("disabled", false);
      });
    }else if(dataType == "rutas"){
      getRoutes(function(data){
        sendGeojson(data, filename);
        
        $("#" + buttonID).prop("disabled", false);
      });
    }else if(dataType == "zonas"){
      getZones(function(data){
        sendGeojson(data, filename);
        
        $("#" + buttonID).prop("disabled", false);
      });
    }
  }
